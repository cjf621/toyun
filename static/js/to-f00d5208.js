import{d as m,L as v,y as S,x as C,a as t,o as k,c as x,w as i,g as e}from"./to-6daecd4d.js";import{u as T}from"./to-e317cdfd.js";const O=m({name:"task-account-info"}),U=m({...O,setup(I){const{service:d}=T(),f=v({items:[{prop:"username",label:"米米号",required:!0,component:{name:"el-input"}},{prop:"pwd",label:"密码",required:!0,component:{name:"el-input",props:{type:"password"}}}]}),p=S({columns:[{type:"selection"},{prop:"createTime",label:"创建时间",sortable:"desc",showOverflowTooltip:!0},{prop:"updateTime",label:"更新时间",sortable:"custom",showOverflowTooltip:!0},{prop:"username",label:"米米号"},{prop:"loginstatus",label:"状态",dict:[{label:"离线",value:0,type:"warning"},{label:"在线",value:1,type:"success"}]},{type:"op",buttons:["edit","delete"]}]});function b(s){var c;let l=(c=p.value)==null?void 0:c.selection,a=new Array;l==null||l.forEach(o=>{a.push(o.username)});const r=JSON.stringify(a);localStorage.setItem("account",r)}const g=C({service:d.base.trumpet,async onRefresh(s,{next:l,done:a,render:r}){var u;const{list:c}=await l(s),o=JSON.parse(localStorage.getItem("account"));JSON.parse(localStorage.getItem("userInfo")),(u=p.value)==null||u.data.forEach(n=>{var _;(o==null?void 0:o.indexOf(n.mimi))!=-1&&((_=p.value)==null||_.toggleRowSelection(n,n.selected))}),r(c)}},s=>{s.refresh()});return(s,l)=>{const a=t("cl-refresh-btn"),r=t("cl-add-btn"),c=t("cl-multi-delete-btn"),o=t("cl-flex1"),u=t("cl-search-key"),n=t("cl-row"),_=t("cl-table"),h=t("cl-pagination"),w=t("cl-upsert"),y=t("cl-crud");return k(),x(y,{ref_key:"Crud",ref:g},{default:i(()=>[e(n,null,{default:i(()=>[e(a),e(r),e(c),e(o),e(u)]),_:1}),e(n,null,{default:i(()=>[e(_,{ref_key:"Table",ref:p,onSelectionChange:b},null,512)]),_:1}),e(n,null,{default:i(()=>[e(o),e(h)]),_:1}),e(w,{ref_key:"Upsert",ref:f},null,512)]),_:1},512)}}});export{U as default};
