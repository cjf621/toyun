import{d as i,u as g,j as V,s as h,r as w,a as s,o as y,b as k,g as o,w as t,h as x,e as N,E as _}from"./to-6daecd4d.js";import{u as C}from"./to-e317cdfd.js";const B={class:"view-my"},E=N("div",{class:"title"},"基本信息",-1),I=i({name:"my-info"}),M=i({...I,setup(U){const{service:r}=C(),{user:m}=g(),e=V(h(m.info)),n=w(!1);async function p(){const{headImg:u,nickName:a,password:d}=e;n.value=!0,await r.base.comm.personUpdate({headImg:u,nickName:a,password:d}).then(()=>{e.password="",_.success("修改成功"),m.get()}).catch(l=>{_.error(l.message)}),n.value=!1}return(u,a)=>{const d=s("cl-upload"),l=s("el-form-item"),f=s("el-input"),v=s("el-button"),b=s("el-form");return y(),k("div",B,[E,o(b,{"label-width":"100px",model:e,disabled:n.value},{default:t(()=>[o(l,{label:"头像"},{default:t(()=>[o(d,{"is-space":"",modelValue:e.headImg,"onUpdate:modelValue":a[0]||(a[0]=c=>e.headImg=c)},null,8,["modelValue"])]),_:1}),o(l,{label:"昵称"},{default:t(()=>[o(f,{modelValue:e.nickName,"onUpdate:modelValue":a[1]||(a[1]=c=>e.nickName=c),placeholder:"请填写昵称"},null,8,["modelValue"])]),_:1}),o(l,null,{default:t(()=>[o(v,{type:"primary",disabled:n.value,onClick:p},{default:t(()=>[x("保存修改")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","disabled"])])}}});export{M as default};
