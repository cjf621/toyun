import{d as m,L as q,$ as S,y as U,x as B,a as o,o as $,c as L,w as n,g as e,f as i}from"./to-912ff8a5.js";import{u as N}from"./to-ef6330f4.js";import{S as _}from"./to-f25a0731.js";import{_ as O}from"./to-d1ba80cc.js";const R=m({name:"cloud-func-info"}),E=m({...R,setup(V){const{service:l,refs:r,setRefs:a,router:d}=N(),f=q({props:{labelWidth:"60px"},items:[{label:"名称",prop:"name",required:!0,component:{name:"el-input"}},{label:"内容",prop:"content",component:{name:"cl-editor-monaco",props:{language:"typescript"},ref:a("monaco")},value:S.func,required:!0},{label:"说明",prop:"readme",component:{name:"el-input",props:{type:"textarea",rows:3}}},{label:"状态",prop:"status",value:1,component:{name:"el-radio-group",options:_},required:!0}],async onSubmit(t,{next:p}){const c=await r.monaco.formatCode();p({...t,content:c})}}),b=U({columns:[{type:"selection"},{label:"名称",prop:"name",minWidth:160},{label:"说明",prop:"readme",minWidth:200,showOverflowTooltip:!0},{label:"状态",prop:"status",component:{name:"cl-switch"},minWidth:150},{label:"创建时间",prop:"createTime",minWidth:160,sortable:"desc"},{label:"更新时间",prop:"updateTime",minWidth:160,sortable:"custom"},{type:"op",width:360,buttons:["edit","delete",{label:"开发",type:"success",hidden:!(l.cloud.func.info._permission.info&&l.cloud.func.info._permission.invoke),onClick({scope:t}){d.push({path:"/cloud/func/dev",query:{id:t.row.id}})}},{label:"查看日志",hidden:!l.cloud.func.log._permission.page,onClick({scope:t}){r.logs.open(t.row)}}]}]}),h=B({service:l.cloud.func.info},t=>{t.refresh()});return(t,p)=>{const c=o("cl-refresh-btn"),y=o("cl-add-btn"),w=o("cl-multi-delete-btn"),C=o("cl-select"),g=o("cl-filter"),u=o("cl-flex1"),k=o("cl-search-key"),s=o("cl-row"),v=o("cl-table"),x=o("cl-pagination"),T=o("cl-upsert"),W=o("cl-crud");return $(),L(W,{ref_key:"Crud",ref:h},{default:n(()=>[e(s,null,{default:n(()=>[e(c),e(y),e(w),e(g,{label:"状态"},{default:n(()=>[e(C,{options:i(_),prop:"status"},null,8,["options"])]),_:1}),e(u),e(k,{placeholder:"搜索名称"})]),_:1}),e(s,null,{default:n(()=>[e(v,{ref_key:"Table",ref:b},null,512)]),_:1}),e(s,null,{default:n(()=>[e(u),e(x)]),_:1}),e(T,{ref_key:"Upsert",ref:f},null,512),e(O,{ref:i(a)("logs")},null,512)]),_:1},512)}}});export{E as default};
