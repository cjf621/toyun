import{aP as v,aM as x,d as m,j as w,a as u,o as f,b as _,c as g,I as b,g as C,f as F,aQ as h}from"./to-bc85d7a1.js";import{l as y}from"./to-862de5a8.js";import{u as M}from"./to-be912673.js";const s=[{label:"图片",value:"image",format:["bmp","jpg","jpeg","png","tif","gif","svg","webp"],color:"#67C23A"},{label:"视频",value:"video",format:["avi","wmv","mpg","mpeg","mov","rm","ram","swf","flv","mp4"],color:"#409EFF"},{label:"音频",value:"audio",format:["mp3","wav","wma","mp2","flac","midi","ra","ape","aac","cda"],color:"#E6A23C"},{label:"文字",value:"Writer",format:["doc","dot","wps","wpt","docx","dotx","docm","dotm"],color:"#F56C6C"},{label:"表格",value:"Spreadsheet",format:["xls","xlt","et","xlsx","xltx","xlsm","xltm"],color:"#F56C6C"},{label:"演示",value:"Presentation",format:["ppt","pptx","pptm","ppsx","ppsm","pps","potx","potm","dpt","dps"],color:"#F56C6C"},{label:"PDF",value:"Pdf",format:["pdf"],color:"#F56C6C"},{label:"文件",value:"file",format:[],color:"#909399"}];function E(e=0){return e<1024?e+"B":e<Math.pow(1024,2)?(e/1024).toFixed(2)+"K":e<Math.pow(1024,3)?(e/Math.pow(1024,2)).toFixed(2)+"M":e<Math.pow(1024,4)?(e/Math.pow(1024,3)).toFixed(2)+"G":(e/Math.pow(1024,4)).toFixed(2)+"T"}function I(e){return v(e.substring(e.indexOf("_")+1))}function N(e){return s.find(l=>l.format.find(i=>i==x(e).toLocaleLowerCase()))||y(s)}function S(e){return s.find(a=>a.value==e)}function T(e){return e.map(a=>a.url.replace(/,/g,encodeURIComponent(","))).join(",")}const P={class:"item-viewer"},j=m({name:"item-viewer"}),A=m({...j,setup(e,{expose:a}){const{refs:l,setRefs:i}=M(),t=w({visible:!1,urls:[],index:0});function c(o,p){var r;if(o.type){if(o.type=="image")return t.visible=!0,t.urls=p.filter(n=>n.type=="image").map(n=>n.url||""),t.index=t.urls.findIndex(n=>n==o.url),!0;if(["Writer","Spreadsheet","Presentation","PDF"].includes(o.type))return(r=l.wps)==null?void 0:r.open(Object.assign(h(o),{officeType:o.type}))}window.open(o.url)}function d(){t.visible=!1}return a({open:c}),(o,p)=>{const r=u("el-image-viewer"),n=u("wps");return f(),_("div",P,[t.visible?(f(),g(r,{key:0,"url-list":t.urls,"initial-index":t.index,infinite:"",teleported:"",onClose:d},null,8,["url-list","initial-index"])):b("",!0),C(n,{ref:F(i)("wps")},null,512)])}}});export{A as _,I as a,E as b,N as c,S as f,T as g};
