import{d as C,u as J,j as k,r as t,L as M,B as P,a4 as Q,y as W,x as Y,a as e,o as c,c as u,w as a,g as l,e as Z,b as ee,N as le,F as oe,l as ae,h as i,X as te,t as ne}from"./to-6daecd4d.js";import{u as h}from"./to-e317cdfd.js";const se=C({name:"task-task"}),ie=C({...se,setup(ce){J();const g=k({domains:[{key:1,value:""}],email:""}),w=()=>{g.domains.push({key:Date.now(),value:""})},s=t(""),p=t(["Tag 1","Tag 2","Tag 3"]),_=t(!1),m=t(),x=o=>{p.value.splice(p.value.indexOf(o),1)},T=o=>{},V=()=>{_.value=!0,te(()=>{m.value.input.focus()})},b=()=>{s.value&&p.value.push(s.value),_.value=!1,s.value=""};t(!1),t([]),t(0);const{service:A,refs:pe,setRefs:B,router:I}=h();k({term:null,fitAddon:null,dialogVisible:!1});const f=M({dialog:{title:P(()=>{var o;return((o=f.value)==null?void 0:o.mode)=="add"?"新建脚本":"编辑"})},items:[{prop:"name",label:"任务名称",component:{name:"el-input"}},{prop:"remark",label:"备注",component:{name:"el-input",props:{type:"textarea",rows:2}}},,{prop:"type",label:"类型",component:{name:"el-radio-group",options:[{label:"用户",value:0},{label:"系统",color:"#67C23A",value:1}]}},{prop:"status",label:"发布状态",component:{name:"el-radio-group",options:[{label:"未发布",value:0},{label:"已发布",color:"#67C23A",value:1}]}},{prop:"open",label:"是否开源",component:{name:"el-radio-group",options:[{label:"私有",value:0},{label:"公开",color:"#67C23A",value:1}]}},{prop:"data",label:"数据",component:{name:"cl-editor-monaco",props:{language:"javascript",lib:["","ext.js"]},ref:B("monaco")}}],async onOpened(){},async onSubmit(o,{next:r}){r({...o})}}),S=Q({items:[{label:"类型",prop:"type",component:{name:"el-select",props:{clearable:!1},options:[{label:"普通",value:0},{label:"系统",value:1}]}}]});h();const D=W({columns:[{type:"selection"},{prop:"uuid",label:"任务ID"},{prop:"createTime",label:"创建时间"},{prop:"updateTime",label:"更新时间"},{prop:"name",label:"任务名称"},{prop:"remark",label:"备注",showOverflowTooltip:!0},{prop:"type",label:"类型",dict:[{label:"普通",value:0,type:"warning"},{label:"系统",value:1,type:"success",color:"#67C23A"}]},{prop:"status",label:"发布状态",component:{name:"cl-switch"}},{prop:"open",label:"是否开源",dict:[{label:"私有",value:0,type:"warning"},{label:"公开",value:1,type:"success",color:"#67C23A"}]},{prop:"author",label:"任务作者"},{fixed:"right",type:"op",buttons:["edit",{label:"开发",type:"success",onClick({scope:o}){I.push({path:"/tos/script/dev",query:{id:o.row.id}})}}]}]}),N=Y({service:A.tos.script.self},o=>{o.refresh()});return(o,r)=>{const U=e("cl-refresh-btn"),j=e("cl-add-btn"),v=e("cl-flex1"),F=e("cl-adv-btn"),K=e("cl-search-key"),O=e("cl-adv-search"),d=e("cl-row"),R=e("cl-table"),z=e("cl-pagination"),L=e("el-tag"),$=e("el-input"),y=e("el-button"),q=e("el-row"),E=e("cl-upsert"),X=e("cl-crud");return c(),u(X,{ref_key:"Crud",ref:N},{default:a(()=>[l(d,null,{default:a(()=>[l(U),l(j),l(v),l(F),l(K),Z("div",null,[l(O,{ref_key:"AdvSearch",ref:S},null,512)])]),_:1}),l(d,null,{default:a(()=>[l(R,{ref_key:"Table",ref:D},null,512)]),_:1}),l(d,null,{default:a(()=>[l(v),l(z)]),_:1}),l(E,{ref_key:"Upsert",ref:f},{"slot-name":a(({scope:G})=>[(c(!0),ee(oe,null,le(p.value,n=>(c(),u(L,{key:n,class:"mx-1",closable:"","disable-transitions":!1,onClose:H=>x(n),onClick:H=>T(n)},{default:a(()=>[i(ne(n),1)]),_:2},1032,["onClose","onClick"]))),128)),_.value?(c(),u($,{key:0,ref_key:"InputRef",ref:m,modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=n=>s.value=n),class:"ml-1 w-20",size:"small",onKeyup:ae(b,["enter"]),onBlur:b},null,8,["modelValue","onKeyup"])):(c(),u(y,{key:1,class:"button-new-tag ml-1",size:"small",onClick:V},{default:a(()=>[i(" + 增加回调 ")]),_:1}))]),"slot-add":a(({scope:G})=>[l(q,null,{default:a(()=>[l(y,{onClick:w},{default:a(()=>[i("添加回调函数")]),_:1})]),_:1})]),_:1},512),i("/> ")]),_:1},512)}}});export{ie as default};
