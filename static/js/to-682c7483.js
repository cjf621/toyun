import{d as v,y as W,x as T,z as B,E as f,aw as E,a as o,q as N,o as h,c as b,w as s,g as e,k as j,f as y,h as D}from"./to-f1ccf9a4.js";import{u as M}from"./to-e32cf6d6.js";const V=v({name:"recycle-data"}),$=v({...V,setup(q){const{service:c}=M(),l=W({columns:[{type:"selection"},{label:"操作人",prop:"userName",minWidth:120},{label:"被删除的数据",prop:"data",minWidth:200,component:{name:"cl-code-json",props:{popover:!0}}},{label:"请求的接口",prop:"url",showOverflowTooltip:!0,minWidth:150},{label:"请求参数",prop:"params",minWidth:150,component:{name:"cl-code-json",props:{popover:!0}}},{label:"删除条数",prop:"count",minWidth:120,sortable:"custom"},{label:"创建时间",prop:"createTime",minWidth:160,sortable:"desc"},{type:"op",minWidth:150,buttons:[{label:"恢复",hidden:!c.recycle.data._permission.restore,type:"success",onClick({scope:t}){u(t.row.id)}}]}]}),p=T({service:c.recycle.data});function _(t){var n;(n=p.value)==null||n.refresh(t)}function u(t){var r;const n=t?[t]:(r=l.value)==null?void 0:r.selection;B.confirm("此操作将恢复被删除的数据，是否继续？","提示",{type:"warning"}).then(()=>{c.recycle.data.restore({ids:n}).then(()=>{f.success("数据恢复成功"),_()}).catch(a=>{f.error(a.message)})}).catch(()=>null)}return E(()=>{_()}),(t,n)=>{const r=o("cl-refresh-btn"),a=o("el-button"),d=o("cl-flex1"),w=o("cl-search-key"),i=o("cl-row"),k=o("cl-table"),C=o("cl-pagination"),g=o("cl-crud"),x=N("permission");return h(),b(g,{ref_key:"Crud",ref:p},{default:s(()=>[e(i,null,{default:s(()=>{var m;return[e(r),j((h(),b(a,{type:"success",disabled:((m=y(l))==null?void 0:m.selection.length)==0,onClick:n[0]||(n[0]=z=>u())},{default:s(()=>[D("批量恢复")]),_:1},8,["disabled"])),[[x,y(c).recycle.data.permission.restore]]),e(d),e(w)]}),_:1}),e(i,null,{default:s(()=>[e(k,{ref_key:"Table",ref:l},null,512)]),_:1}),e(i,null,{default:s(()=>[e(d),e(C)]),_:1})]),_:1},512)}}});export{$ as default};
