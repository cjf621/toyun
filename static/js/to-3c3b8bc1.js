import{d as y,r as u,A as q,y as A,a3 as E,x as L,L as S,a as t,q as z,o as _,c as f,w as o,g as e,k as G,f as h,h as k,b as O,N as W,F as $,t as H}from"./to-6daecd4d.js";import{u as I}from"./to-e317cdfd.js";const J=y({name:"job-manage"}),Q=y({...J,setup(K){const v=["flash","h5"],i=u(["flash"]),{service:m,refs:w,setRefs:x}=I();q(),u(),u();const g=A({columns:[{type:"selection"},{prop:"name",label:"名称"},{prop:"conf",label:"配置"},{label:"类型",prop:"type",dict:[{label:"h5",value:4,type:"success"},{label:"flash",value:2,type:"danger"},{label:"h5|flash",value:6,type:"warning"}]},{prop:"limit",label:"默认次数"},{prop:"remark",label:"备注",showOverflowTooltip:!0},{label:"状态",prop:"status",dict:[{label:"启用",value:1,type:"success"},{label:"禁用",value:0,type:"danger"}]},{type:"op",width:260,buttons:["edit","delete"]}]});E();const C=L({service:m.job.info},l=>{l.refresh()}),V=S({dialog:{width:"600px"},props:{labelWidth:"100px"},items:[{label:"名称",prop:"name",required:!0,component:{name:"el-input"}},{label:"默认配置",prop:"conf",value:"",component:{name:"el-input",props:{}}},{label:"默认计数",prop:"limit",value:1,component:{name:"el-input-number",props:{min:1}}},{label:"脚本类型",prop:"type",value:1,component:{name:"slot-name",props:{min:1}}},{prop:"status",value:1,label:"状态",component:{name:"cl-switch"}},{label:"备注",prop:"remark",component:{name:"el-input",props:{type:"textarea",rows:4}}}],onSubmit(l,{next:s}){let r=w.type.modelValue,a=new Array;r.forEach(c=>{c=="flash"&&a.push(1),c=="h5"&&a.push(2)}),s({...l,type:a})}});return(l,s)=>{const r=t("cl-refresh-btn"),a=t("cl-add-btn"),c=t("cl-multi-delete-btn"),b=t("cl-flex1"),T=t("cl-search-key"),p=t("cl-row"),D=t("el-button"),R=t("cl-table"),U=t("el-checkbox-button"),B=t("el-checkbox-group"),F=t("cl-upsert"),N=t("cl-crud"),j=z("permission");return _(),f(N,{ref_key:"Crud",ref:C},{default:o(()=>[e(p,null,{default:o(()=>[e(r),e(a),e(c),e(b),e(T,{placeholder:"搜索名称"})]),_:1}),e(p,null,{default:o(()=>[e(R,{ref_key:"Table",ref:g,"row-key":"id",onRowClick:l.onRowClick},{"slot-btn":o(({scope:d})=>[G((_(),f(D,{text:"",bg:"",type:"success",onClick:n=>l.append(d.row)},{default:o(()=>[k("新增")]),_:2},1032,["onClick"])),[[j,h(m).dict.info.permission.add]])]),_:1},8,["onRowClick"])]),_:1}),e(p,null,{default:o(()=>[e(b)]),_:1}),e(F,{ref_key:"Upsert",ref:V},{"slot-name":o(({scope:d})=>[e(B,{ref:h(x)("type"),modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=n=>i.value=n),size:"large"},{default:o(()=>[(_(),O($,null,W(v,n=>e(U,{key:n,label:n},{default:o(()=>[k(H(n),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1},512)]),_:1},512)}}});export{Q as default};
