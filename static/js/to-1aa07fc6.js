import{d as y,r as b,n as C,cF as V,X as B,ag as D,a as i,o as N,b as x,g as c,w as a,h as p,e as h,t as E,p as I,m as w}from"./to-6daecd4d.js";import{D as A}from"./to-26ef2310.js";import{i as S}from"./to-f8e5709f.js";import{_ as $}from"./to-c27b6911.js";import"./to-8f6b0e9e.js";const U=y({name:"cl-column-custom",props:{name:String,columns:{type:Array,required:!0,default:()=>[]}},components:{Draggable:A},setup(o){const l=b(!1),m=`column-custom__${o.name||location.pathname}`,s=b([]);function _(){B(()=>{o.columns.forEach(t=>{var n;!t.type&&t.prop&&(t.hidden=!((n=s.value.find(e=>e.prop==t.prop))!=null&&n.checked),t.orderNum=s.value.findIndex(e=>e.prop==t.prop))})})}function v(){V.set(m,s.value),_(),r()}function d(){l.value=!0}function r(){l.value=!1}return C(()=>o.columns,t=>{if(t){const n=V.get(m);s.value=D(t.filter(e=>!e.type&&e.prop).map(e=>{var k;let u=!0,g=e.orderNum||0;return S(e.hidden)&&(u=!e.hidden),n&&(u=(k=n.find(f=>f.prop==e.prop))==null?void 0:k.checked,g=n.findIndex(f=>f.prop==e.prop)),{label:e.label,prop:e.prop,checked:u,orderNum:g}}),"orderNum","asc"),_()}}),{visible:l,list:s,open:d,close:r,save:v}}});const F=o=>(I("data-v-2e4c526f"),o=o(),w(),o),T={class:"cl-column-custom__wrap"},q={class:"cl-column-custom__dialog"},X={class:"left"},j=F(()=>h("div",{class:"right"},null,-1));function z(o,l,m,s,_,v){const d=i("el-button"),r=i("el-checkbox"),t=i("draggable"),n=i("cl-dialog");return N(),x("div",T,[c(d,{onClick:o.open},{default:a(()=>[p("自定义列")]),_:1},8,["onClick"]),c(n,{modelValue:o.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>o.visible=e),title:"自定义列"},{footer:a(()=>[c(d,{onClick:o.close},{default:a(()=>[p("取消")]),_:1},8,["onClick"]),c(d,{type:"success",onClick:o.save},{default:a(()=>[p("保存")]),_:1},8,["onClick"])]),default:a(()=>[h("div",q,[h("div",X,[c(t,{modelValue:o.list,"onUpdate:modelValue":l[0]||(l[0]=e=>o.list=e)},{item:a(({element:e})=>[c(r,{border:"",modelValue:e.checked,"onUpdate:modelValue":u=>e.checked=u},{default:a(()=>[p(E(e.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),j])]),_:1},8,["modelValue"])])}const M=$(U,[["render",z],["__scopeId","data-v-2e4c526f"]]);export{M as default};
