import{d as p,u as V,j as w,s as g,r as y,a as n,o as h,b as k,g as o,w as s,h as x,e as N,E as _}from"./to-dbebbab1.js";import{u as C}from"./to-4abe4e3d.js";const B={class:"view-my"},U=N("div",{class:"title"},"基本信息",-1),E=p({name:"my-info"}),M=p({...E,setup(I){const{service:i}=C(),{user:u}=V(),e=w(g(u.info)),d=y(!1);async function f(){const{headImg:c,nickName:a,password:m}=e;d.value=!0,await i.base.comm.personUpdate({headImg:c,nickName:a,password:m}).then(()=>{e.password="",_.success("修改成功"),u.get()}).catch(l=>{_.error(l.message)}),d.value=!1}return(c,a)=>{const m=n("cl-upload"),l=n("el-form-item"),r=n("el-input"),v=n("el-button"),b=n("el-form");return h(),k("div",B,[U,o(b,{"label-width":"100px",model:e,disabled:d.value},{default:s(()=>[o(l,{label:"头像"},{default:s(()=>[o(m,{"is-space":"",modelValue:e.headImg,"onUpdate:modelValue":a[0]||(a[0]=t=>e.headImg=t)},null,8,["modelValue"])]),_:1}),o(l,{label:"昵称"},{default:s(()=>[o(r,{modelValue:e.nickName,"onUpdate:modelValue":a[1]||(a[1]=t=>e.nickName=t),placeholder:"请填写昵称"},null,8,["modelValue"])]),_:1}),o(l,{label:"密码"},{default:s(()=>[o(r,{modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=t=>e.password=t),type:"password"},null,8,["modelValue"])]),_:1}),o(l,null,{default:s(()=>[o(v,{type:"primary",disabled:d.value,onClick:f},{default:s(()=>[x("保存修改")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","disabled"])])}}});export{M as default};
