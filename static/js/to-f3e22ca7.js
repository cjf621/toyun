import{d as N,i as x,r as l,aI as q,g as t,aJ as w,aK as j,aj as k,aL as K,aM as H,aN as R,h as z,F,a as I,o as L,b as Q,e as M,w as C,f,cR as Z,k as J,S as P,aO as W}from"./to-6daecd4d.js";import{l as g,v as O,T as A}from"./to-4d9e1c9c.js";import{u as G}from"./to-e317cdfd.js";import{i as p}from"./to-d5b99870.js";import{u as X}from"./to-0405b573.js";import"./to-d91d3910.js";const $={class:"cl-chat__wrap"};function U(c){return typeof c=="function"||Object.prototype.toString.call(c)==="[object Object]"&&!W(c)}const ee=N({name:"cl-chat"}),ie=N({...ee,setup(c){const{mitt:s}=G();x(()=>{g.config({paths:{vs:"https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.37.1/min/vs/"}}),g.config({"vs/nls":{availableLanguages:{"*":"zh-cn"}}}),g.init().then(e=>{window.toeditor=e})});class D{constructor(){this.internalMethod=this.internalMethod.bind(this),this.send=this.internalMethod}internalMethod(a){_.send(a)}}window.To=new D;const _=X();_.onmessage(e=>{let a=JSON.parse(e);s.emit(a.message,a.data)});const i=l(!1),m=l("danger");l(20);let h=!1,S={type:"html",content:`
		<div class="demo-init-box">
                                <p>欢迎使用TO科技! ✋</p>
                                <p>当前处于内测阶段</p>
                                <p>QQ群: <a class="t-a" target="_blank" href="点击链接加入群聊【<$ÿĀ>TO开发交流(LOGIN/】：http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=KYxAuxDRqjvWVSbkV_r_pVpE0nn1aHV4&authKey=XZkOVCs6Ht4Kqo1i8%2B%2FZuYyODguHimbZ0CIJ6G8b8ocb85B6y4ZBP1c%2Bmo0f5bPd&noverify=0&group_code=677010591">点击加入QQ群</a></p>
                            </div>

          `};function T(){i.value=!i.value}l(!0);function E(e,a){}function Y(e,a){e=="close"&&(i.value=!1)}function B(e,a,n,d){if(e==="fail")d("Something wrong!!!");else{let r=["success","error","system","info","warning"],u=r[Math.floor(Math.random()*r.length)];n({type:"normal",class:u,tag:"成功",content:a})}}const v=l(0);s.on("log.countadd",e=>{v.value+=1}),s.on("log_info",e=>{O.api.pushMessage("my-terminal",e)}),s.on("log.show",e=>{i.value=!0}),q.LEFT;const y=l([]);p.getlog().then(e=>{y.value=e});const V=e=>{var u;let n=e.target.parentNode;for(;;){const o=((u=n.className)==null?void 0:u.split(" "))||[];if(o.indexOf("el-table-v2__row")>-1)break;if(o.indexOf("el-table-v2__header")>-1||o.indexOf("el-virtual-scrollbar")>-1||o.indexOf("el-table-v2__empty")>-1)return;const b=n.parentNode;if(!b)return;n=b}const d=n.querySelector("._index");if(!d)return;const r=parseInt(d.innerHTML);isNaN(r)||(p.dellog(r),p.getlog().then(o=>{y.value=o}))};return s.on("ws_online",e=>{e?m.value="success":m.value="danger"}),x(()=>{h||(O.api.pushMessage("my-terminal",S),h=!0)}),(e,a)=>{const n=I("el-badge");return L(),Q("div",$,[M("div",{class:"cl-chat__icon",onClick:T},[t(n,{value:v.value,type:m.value},{default:C(()=>[t(f(w),{size:15},{default:C(()=>[t(f(Z))]),_:1})]),_:1},8,["value","type"])]),M("div",null,[J(t(f(A),{class:"container","init-log":"",context:"常长老",onOnClick:Y,name:"my-terminal",onExecCmd:B,title:"终端",onPushMessageBefore:E,"drag-conf":{width:"60%",height:"40 %"}},null,512),[[P,i.value]])])])}}});export{ie as default};
