import{u as o,aH as c,r}from"./to-889985a4.js";const{user:d,app:i}=o(),f=c("webSocket",()=>{const e=r(null),t=[];function l(n){e.value=new WebSocket(`wss://yun.72wo.cn/ws/?t=${d.token}`),e.value.addEventListener("open",()=>{var s;(s=e.value)==null||s.send(n)}),e.value.addEventListener("message",s=>{t.forEach(a=>{a(s.data)})}),e.value.addEventListener("close",()=>{e.value=null})}return{get isConnected(){return e.value&&e.value.readyState===WebSocket.OPEN},connect(n,s){e.value=new WebSocket(n),e.value.addEventListener("open",()=>{var a;s!=null&&((a=e.value)==null||a.send(s))}),e.value.addEventListener("message",a=>{t.forEach(u=>{u(a.data)})}),e.value.addEventListener("close",()=>{e.value=null})},send(n){e.value!=null?e.value.send(n):l(n)},onmessage(n){t.push(n)},close(){var n;(n=e.value)==null||n.close()},offmessage(n){const s=t.indexOf(n);s!==-1&&t.splice(s,1)}}});export{f as u};
