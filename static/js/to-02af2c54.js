import{d,r as a,n as V,L as x,a as l,o as C,b,g as c,e as w,w as g,M as N}from"./to-dbebbab1.js";import{u as B}from"./to-4abe4e3d.js";import{_ as T}from"./to-c27b6911.js";const L={class:"cl-menu-check"},U={class:"cl-menu-check__scroller"},A=d({name:"cl-menu-check"}),E=d({...A,props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(u,{emit:_}){const i=u,{service:p}=B(),o=a(),r=a(),n=a("");async function m(){return p.base.sys.menu.list().then(e=>{r.value=N(e)})}function f(e,t){return e?t.name.includes(e):!0}function h(e,{checkedKeys:t,halfCheckedKeys:s}){_("update:modelValue",[...t,...s])}return V(n,e=>{o.value.filter(e)}),x({async onOpened(){await m(),o.value.setCheckedKeys((i.modelValue||[]).filter(e=>{var t;return(t=o.value.getNode(e))==null?void 0:t.isLeaf}))}}),(e,t)=>{const s=l("el-input"),k=l("el-tree"),v=l("el-scrollbar");return C(),b("div",L,[c(s,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=y=>n.value=y),placeholder:"输入关键字进行过滤"},null,8,["modelValue"]),w("div",U,[c(v,{"max-height":"200px"},{default:g(()=>[c(k,{ref_key:"Tree",ref:o,"node-key":"id","show-checkbox":"",data:r.value,props:{label:"name",children:"children"},"filter-node-method":f,onCheck:h},null,8,["data"])]),_:1})])])}}});const O=T(E,[["__scopeId","data-v-d640c385"]]);export{O as default};
